/**
 * @file globals.css
 * @description Global CSS file for the Kellygroup Next.js SaaS application.
 * Uses Tailwind CSS v4 with direct @theme configuration and neumorphic design system.
 * All Tailwind configuration is handled inline without external config files.
 */

@import "tailwindcss";
@theme {
  /* Base Colors */
  --color-background: oklch(94% 0 0);
  --color-foreground: oklch(15% 0 0);
  --color-card: oklch(94% 0 0);
  --color-card-foreground: oklch(15% 0 0);
  --color-popover: oklch(94% 0 0);
  --color-popover-foreground: oklch(15% 0 0);

  /* Accent Colors */
  --color-primary: oklch(75% 0.15 300);
  --color-primary-foreground: oklch(20% 0.02 300);
  --color-secondary: oklch(90% 0.12 85);
  --color-secondary-foreground: oklch(20% 0.02 85);

  /* Semantic Colors */
  --color-muted: oklch(85% 0.01 240);
  --color-muted-foreground: oklch(30% 0.01 240);
  --color-destructive: oklch(85% 0.1 30);
  --color-destructive-foreground: oklch(15% 0.05 30);

  /* UI Colors */
  --color-border: oklch(80% 0 0);
  --color-input: oklch(88% 0 0);
  --color-ring: var(--color-primary);

  /* Enhanced Neumorphic Shadow System */
  --shadow-strength-sm: 0.05;
  --shadow-strength-md: 0.1;
  --shadow-strength-lg: 0.15;

  /* Light Mode Shadow Colors */
  --color-shadow-light: oklch(100% 0 0 / var(--shadow-strength-md));
  --color-shadow-dark: oklch(0% 0 0 / var(--shadow-strength-md));
  --color-shadow-ambient: oklch(50% 0 0 / 0.03);

  /* Enhanced Shadow Variations */
  --shadow-depth-sm: 2px;
  --shadow-depth-md: 5px;
  --shadow-depth-lg: 10px;
  --shadow-blur-sm: 5px;
  --shadow-blur-md: 10px;
  --shadow-blur-lg: 20px;

  /* Enhanced Shadows */
  --shadow-flat: none;
  --shadow-raised:
    var(--shadow-depth-md) var(--shadow-depth-md) var(--shadow-blur-md)
      oklch(0 0 0 / var(--shadow-strength-md)),
    calc(var(--shadow-depth-md) * -1) calc(var(--shadow-depth-md) * -1)
      var(--shadow-blur-md) oklch(100% 0 0 / var(--shadow-strength-md));
  --shadow-pressed:
    inset var(--shadow-depth-md) var(--shadow-depth-md) var(--shadow-blur-md)
      oklch(0 0 0 / var(--shadow-strength-md)),
    inset calc(var(--shadow-depth-md) * -1) calc(var(--shadow-depth-md) * -1)
      var(--shadow-blur-md) oklch(100% 0 0 / var(--shadow-strength-md));
  --shadow-convex:
    var(--shadow-depth-sm) var(--shadow-depth-sm) var(--shadow-blur-sm)
      oklch(0 0 0 / var(--shadow-strength-sm)),
    calc(var(--shadow-depth-sm) * -1) calc(var(--shadow-depth-sm) * -1)
      var(--shadow-blur-sm) oklch(100% 0 0 / var(--shadow-strength-sm)),
    inset var(--shadow-depth-sm) calc(var(--shadow-depth-sm) * -1)
      var(--shadow-blur-sm) oklch(100% 0 0 / var(--shadow-strength-sm)),
    inset calc(var(--shadow-depth-sm) * -1) var(--shadow-depth-sm)
      var(--shadow-blur-sm) oklch(0 0 0 / var(--shadow-strength-sm));

  /* Animation Properties */
  --bounce-strength: 1.1;
  --float-distance: 0.5rem;
  --pulse-scale: 1.05;
  --rotate-amount: 180deg;
  --shake-intensity: 0.5rem;

  /* Interaction States */
  --hover-lift: translateY(-2px);
  --hover-scale: scale(1.02);
  --active-press: scale(0.98);
  --focus-glow: 0 0 0 2px var(--color-accent);

  /* Enhanced Animation System */
  --transition-duration-instant: 50ms;
  --transition-duration-fast: 150ms;
  --transition-duration-normal: 200ms;
  --transition-duration-slow: 300ms;
  --transition-duration-slower: 400ms;

  --transition-timing-bounce: cubic-bezier(0.68, -0.55, 0.265, 1.55);
  --transition-timing-smooth: cubic-bezier(0.4, 0, 0.2, 1);
  --transition-timing-sharp: cubic-bezier(0.4, 0, 0.6, 1);
  --transition-timing-elastic: cubic-bezier(0.68, -0.6, 0.32, 1.6);

  /* Motion Properties */
  --transform-press: scale(0.97);
  --transform-hover: scale(1.02);
  --transform-tap: scale(0.95);

  /* Spacing Scale */
  --spacing-1: 0.25rem;
  --spacing-2: 0.5rem;
  --spacing-3: 0.75rem;
  --spacing-4: 1rem;
  --spacing-6: 1.5rem;
  --spacing-8: 2rem;
  --spacing-12: 3rem;
  --spacing-16: 4rem;

  /* Border Radius */
  --radius-sm: 0.25rem;
  --radius-md: 0.5rem;
  --radius-lg: 0.75rem;
  --radius-xl: 1rem;
  --radius-2xl: 1.25rem;
  --radius-full: 9999px;

  /* Typography Scale */
  --text-xs: 0.75rem;
  --text-sm: 0.875rem;
  --text-base: 1rem;
  --text-lg: 1.125rem;
  --text-xl: 1.25rem;
  --text-2xl: 1.5rem;
  --text-3xl: 1.875rem;
  --text-4xl: 2.25rem;

  /* Font Weights */
  --font-weight-normal: 400;
  --font-weight-medium: 500;
  --font-weight-semibold: 600;
  --font-weight-bold: 700;

  /* Line Heights */
  --leading-none: 1;
  --leading-tight: 1.25;
  --leading-snug: 1.375;
  --leading-normal: 1.5;
  --leading-relaxed: 1.625;
  --leading-loose: 2;

  /* Animation Timings */
  --duration-fast: 150ms;
  --duration-normal: 200ms;
  --duration-slow: 300ms;
  --ease-default: cubic-bezier(0.4, 0, 0.2, 1);
  --ease-in: cubic-bezier(0.4, 0, 1, 1);
  --ease-out: cubic-bezier(0, 0, 0.2, 1);
  --ease-in-out: cubic-bezier(0.4, 0, 0.2, 1);

  /* Navigation & Menu Variables */
  --nav-height: 4rem;
  --drawer-width: 280px;
  --menu-item-height: 2.5rem;
  --dropdown-width: 200px;
  --mega-menu-width: 800px;
  --toast-width: 360px;
  --modal-width: 500px;

  /* Z-index Scale */
  --z-dropdown: 50;
  --z-sticky: 100;
  --z-drawer: 200;
  --z-modal: 300;
  --z-toast: 400;
  --z-tooltip: 500;

  /* Animation Timing */
  --slide-duration: 200ms;
  --fade-duration: 150ms;
  --scale-duration: 200ms;
}

/* --------------------------------------------------
    3) THEME OVERRIDES FOR .dark (Dark Mode)
    -------------------------------------------------- */

.dark {
  --color-background: oklch(40% 0 0);
  --color-foreground: oklch(85% 0 0);

  --color-card: oklch(40% 0 0);
  --color-card-foreground: oklch(85% 0 0);
  --color-popover: oklch(40% 0 0);
  --color-popover-foreground: oklch(85% 0 0);

  /* Keep purple + yellow for accent but you can tweak if desired */
  --color-primary: oklch(75% 0.15 300);
  --color-primary-foreground: oklch(20% 0.02 300);
  --color-secondary: oklch(90% 0.12 85);
  --color-secondary-foreground: oklch(20% 0.02 85);

  --color-muted: oklch(30% 0 0);
  --color-muted-foreground: oklch(85% 0 0);
  --color-destructive: oklch(55% 0.1 30);
  --color-destructive-foreground: oklch(95% 0.04 30);

  --color-border: oklch(35% 0 0);
  --color-input: oklch(35% 0 0);
  --color-ring: var(--color-primary);

  /* Dark Mode Shadow System */
  --shadow-strength-sm: 0.1;
  --shadow-strength-md: 0.2;
  --shadow-strength-lg: 0.3;

  --color-shadow-light: oklch(100% 0 0 / calc(var(--shadow-strength-md) * 0.5));
  --color-shadow-dark: oklch(0% 0 0 / var(--shadow-strength-md));
  --color-shadow-ambient: oklch(50% 0 0 / 0.05);

  /* Dark mode specific neumorphic shadows */
  --nm-surface-dark: var(--color-background);
  --nm-shadow-dark:
    3px 3px 6px rgba(0, 0, 0, 0.45), -3px -3px 6px rgba(255, 255, 255, 0.07);
  --nm-shadow-dark-lg:
    6px 6px 12px rgba(0, 0, 0, 0.6), -6px -6px 12px rgba(255, 255, 255, 0.06);
  --nm-inset-shadow-dark:
    inset 2px 2px 4px rgba(0, 0, 0, 0.5),
    inset -2px -2px 4px rgba(255, 255, 255, 0.05);
  --nm-convex-shadow-dark:
    3px 3px 6px rgba(0, 0, 0, 0.45), -3px -3px 6px rgba(255, 255, 255, 0.07),
    inset 1px 1px 2px rgba(255, 255, 255, 0.06),
    inset -1px -1px 2px rgba(0, 0, 0, 0.4);
}

/* --------------------------------------------------
    4) BASE LAYER: HTML Elements & Global Resets
    -------------------------------------------------- */
@layer base {
  *,
  *::before,
  *::after {
    box-sizing: border-box;
    border-color: var(--color-border);
  }

  body {
    margin: 0;
    padding: 0;
    background: var(--color-background);
    color: var(--color-foreground);
    font-family:
      system-ui,
      -apple-system,
      BlinkMacSystemFont,
      "Segoe UI",
      Roboto,
      Helvetica,
      Arial,
      sans-serif,
      "Apple Color Emoji",
      "Segoe UI Emoji",
      "Segoe UI Symbol";
    transition:
      background var(--duration-normal) var(--ease-default),
      color var(--duration-normal) var(--ease-default);
  }

  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    margin-top: 1.5rem;
    margin-bottom: 1rem;
    font-weight: var(--font-weight-semibold);
    line-height: var(--leading-tight);
  }

  p {
    margin-top: 1rem;
    margin-bottom: 1rem;
    line-height: var(--leading-normal);
  }

  blockquote {
    margin: 1rem 0;
    padding-left: 1rem;
    border-left: 4px solid var(--color-primary);
    opacity: 0.9;
    font-style: italic;
  }

  hr {
    border: none;
    border-top: 1px solid var(--color-border);
    margin: 2rem 0;
  }

  table {
    width: 100%;
    border-collapse: collapse;
    margin: 1.5rem 0;
  }

  th,
  td {
    padding: 0.75rem 1rem;
    border: 1px solid var(--color-border);
  }

  ul,
  ol {
    margin-left: 2rem;
    margin-bottom: 1rem;
  }

  li {
    margin-bottom: 0.5rem;
  }
}

/* --------------------------------------------------
    5) COMPONENTS LAYER: Buttons, Forms, Cards, etc.
    -------------------------------------------------- */
@layer components {
  /* --- BUTTONS --- */
  .btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: var(--spacing-2) var(--spacing-4);
    font-weight: var(--font-weight-medium);
    border-radius: var(--radius-md);
    cursor: pointer;
    border: none;
    background: var(--color-background);
    color: var(--color-foreground);
    box-shadow: var(--shadow-raised);
    transition:
      transform var(--transition-duration-fast) var(--transition-timing-smooth),
      box-shadow var(--transition-duration-fast) var(--transition-timing-smooth);
  }

  .btn:hover {
    transform: var(--transform-hover);
    box-shadow: var(--shadow-hover);
  }

  .btn:active {
    transform: var(--transform-press);
    box-shadow: var(--shadow-pressed);
  }

  .btn:focus-visible {
    box-shadow: var(--shadow-focus);
  }

  .btn-primary {
    background: var(--color-primary);
    color: var(--color-primary-foreground);
  }

  .btn-secondary {
    background: var(--color-secondary);
    color: var(--color-secondary-foreground);
  }

  /* --- FORM CONTROLS --- */
  .form-control {
    margin-bottom: var(--spacing-4);
  }

  .form-label {
    display: block;
    margin-bottom: var(--spacing-2);
    font-weight: var(--font-weight-medium);
    color: var(--color-foreground);
  }

  .input,
  .textarea,
  .select {
    width: 100%;
    padding: var(--spacing-2) var(--spacing-3);
    border-radius: var(--radius-md);
    background: var(--color-background);
    color: var(--color-foreground);
    border: none;
    box-shadow: var(--shadow-pressed);
    transition:
      box-shadow var(--transition-duration-normal)
        var(--transition-timing-smooth),
      transform var(--transition-duration-fast) var(--transition-timing-smooth);
  }

  .input:hover,
  .textarea:hover,
  .select:hover {
    box-shadow: var(--shadow-hover);
  }

  .input:focus,
  .textarea:focus,
  .select:focus {
    box-shadow: var(--shadow-focus);
    outline: none;
  }

  .textarea {
    min-height: 6rem;
    resize: vertical;
  }

  /* --- SWITCH (TOGGLE) --- */
  .switch {
    position: relative;
    display: inline-flex;
    width: 3.5rem;
    height: 2rem;
    border-radius: var(--radius-full);
    background: var(--color-background);
    box-shadow: var(--shadow-pressed);
    cursor: pointer;
    transition:
      box-shadow var(--transition-duration-normal)
        var(--transition-timing-smooth),
      background var(--transition-duration-normal)
        var(--transition-timing-smooth);
  }

  .switch input[type="checkbox"] {
    opacity: 0;
    width: 0;
    height: 0;
    position: absolute;
  }

  .switch::before {
    content: "";
    position: absolute;
    top: 0.25rem;
    left: 0.25rem;
    width: 1.5rem;
    height: 1.5rem;
    border-radius: 50%;
    background: var(--color-foreground);
    box-shadow: var(--shadow-raised);
    transition:
      transform var(--transition-duration-normal)
        var(--transition-timing-bounce),
      background var(--transition-duration-normal)
        var(--transition-timing-smooth);
  }

  .switch:hover::before {
    transform: scale(1.1);
  }

  .switch input[type="checkbox"]:checked + .switch {
    background: var(--color-primary);
  }

  .switch input[type="checkbox"]:checked + .switch::before {
    transform: translateX(1.5rem);
    background: var(--color-primary-foreground);
  }

  .switch input[type="checkbox"]:focus-visible + .switch {
    box-shadow: var(--shadow-focus);
  }

  /* --- CARD --- */
  .card {
    padding: var(--spacing-4);
    margin-bottom: var(--spacing-4);
    border-radius: var(--radius-lg);
    background: var(--color-background);
    color: var(--color-foreground);
    box-shadow: var(--shadow-raised);
    transition:
      transform var(--transition-duration-normal)
        var(--transition-timing-smooth),
      box-shadow var(--transition-duration-normal)
        var(--transition-timing-smooth);
  }

  .card:hover {
    transform: var(--transform-hover);
    box-shadow: var(--shadow-hover);
  }

  .card-interactive {
    cursor: pointer;
  }

  .card-interactive:active {
    transform: var(--transform-press);
    box-shadow: var(--shadow-pressed);
  }

  /* Header */
  .header {
    @apply bg-background fixed top-0 right-0 left-0 h-[var(--nav-height)];
    box-shadow: var(--shadow-raised);
    z-index: var(--z-sticky);
  }

  .header-content {
    @apply container mx-auto flex h-full items-center justify-between px-4;
  }

  /* Navigation Menu */
  .nav-menu {
    @apply flex items-center gap-2;
  }

  .nav-item {
    @apply relative rounded-md px-4 py-2 transition-all;
  }

  .nav-item:hover {
    box-shadow: var(--shadow-hover);
    transform: var(--transform-hover);
  }

  .nav-item.active {
    box-shadow: var(--shadow-pressed);
    color: var(--color-primary);
  }

  /* Dropdown Menu (Pure CSS) */
  .dropdown {
    @apply relative inline-block;
  }

  .dropdown-trigger {
    @apply flex items-center gap-2 rounded-md px-4 py-2 transition-all;
  }

  .dropdown-content {
    @apply bg-background invisible absolute top-full left-0 mt-2 w-[var(--dropdown-width)] -translate-y-2 transform rounded-lg opacity-0 transition-all duration-200;
    box-shadow: var(--shadow-raised);
  }

  .dropdown:hover .dropdown-content,
  .dropdown:focus-within .dropdown-content {
    @apply visible translate-y-0 opacity-100;
  }

  .dropdown-item {
    @apply hover:nm-pressed block w-full px-4 py-2 text-left transition-all;
  }

  /* Enhanced Mega Menu */
  .mega-menu {
    @apply bg-background invisible absolute top-full left-1/2 grid w-[var(--mega-menu-width)] -translate-x-1/2 -translate-y-2 grid-cols-4 gap-8 rounded-lg p-6 opacity-0 transition-all duration-200;
    box-shadow: var(--shadow-raised);
    z-index: var(--z-dropdown);
  }

  .mega-menu-trigger:hover .mega-menu,
  .mega-menu-trigger:focus-within .mega-menu {
    @apply visible translate-y-0 opacity-100;
  }

  .mega-menu-section {
    @apply space-y-4;
  }

  /* Enhanced Popover */
  .popover {
    @apply bg-background invisible absolute z-50 scale-95 transform rounded-lg p-4 opacity-0 transition-all duration-200;
    box-shadow: var(--shadow-raised);
    min-width: 200px;
  }

  .popover-trigger:hover .popover,
  .popover-trigger:focus-within .popover {
    @apply visible scale-100 opacity-100;
  }

  /* Carousel */
  .carousel {
    @apply relative overflow-hidden rounded-lg;
    box-shadow: var(--shadow-raised);
  }

  .carousel-inner {
    @apply flex transition-transform duration-300;
  }

  .carousel-item {
    @apply w-full flex-none;
  }

  .carousel-control {
    @apply bg-background/80 text-foreground absolute top-1/2 flex h-10 w-10 -translate-y-1/2 items-center justify-center rounded-full transition-all;
    box-shadow: var(--shadow-raised);
  }

  .carousel-control:hover {
    @apply bg-background;
    box-shadow: var(--shadow-pressed);
  }

  .carousel-control-prev {
    @apply left-4;
  }

  .carousel-control-next {
    @apply right-4;
  }

  .carousel-indicators {
    @apply absolute bottom-4 left-1/2 flex -translate-x-1/2 gap-2;
  }

  .carousel-indicator {
    @apply bg-background h-2 w-2 rounded-full transition-all;
    box-shadow: var(--shadow-pressed);
  }

  .carousel-indicator.active {
    @apply bg-primary w-4;
  }

  /* Accordion */
  .accordion {
    @apply divide-border divide-y overflow-hidden rounded-lg;
    box-shadow: var(--shadow-raised);
  }

  .accordion-item {
    @apply bg-background;
  }

  .accordion-header {
    @apply flex w-full items-center justify-between p-4 text-left transition-all;
  }

  .accordion-header:hover {
    box-shadow: var(--shadow-hover);
  }

  .accordion-content {
    @apply max-h-0 overflow-hidden transition-all duration-300;
  }

  .accordion-item[open] .accordion-content {
    @apply max-h-96 p-4;
  }

  .accordion-icon {
    @apply h-5 w-5 transition-transform duration-200;
  }

  .accordion-item[open] .accordion-icon {
    @apply rotate-180;
  }

  /* Enhanced Drawer Variants */
  .drawer-right {
    @apply bg-background fixed top-0 -right-[var(--drawer-width)] bottom-0 w-[var(--drawer-width)] transition-transform duration-300;
    box-shadow: var(--shadow-raised);
    z-index: var(--z-drawer);
  }

  .drawer-toggle:checked ~ .drawer-right {
    transform: translateX(calc(var(--drawer-width) * -1));
  }

  .drawer-bottom {
    @apply bg-background fixed right-0 bottom-0 left-0 h-[80vh] -translate-y-full transition-transform duration-300;
    box-shadow: var(--shadow-raised);
    z-index: var(--z-drawer);
  }

  .drawer-toggle:checked ~ .drawer-bottom {
    @apply translate-y-0;
  }

  /* Enhanced Modal Variants */
  .modal-slide-right {
    transform: translateX(100%);
  }

  .modal-toggle:checked ~ .modal .modal-slide-right {
    transform: translateX(0);
  }

  .modal-slide-up {
    transform: translateY(100%);
  }

  .modal-toggle:checked ~ .modal .modal-slide-up {
    transform: translateY(0);
  }

  .modal-scale {
    transform: scale(0.95);
    opacity: 0;
  }

  .modal-toggle:checked ~ .modal .modal-scale {
    transform: scale(1);
    opacity: 1;
  }

  /* Sidebar Navigation */
  .sidebar {
    @apply bg-background fixed top-[var(--nav-height)] bottom-0 left-0 w-64 -translate-x-full transform transition-transform duration-300;
    box-shadow: var(--shadow-raised);
    z-index: var(--z-drawer);
  }

  .sidebar.open {
    @apply translate-x-0;
  }

  .sidebar-item {
    @apply flex items-center gap-3 px-4 py-3 transition-all;
  }

  .sidebar-item:hover {
    box-shadow: var(--shadow-hover);
  }

  .sidebar-item.active {
    @apply bg-primary text-primary-foreground;
    box-shadow: var(--shadow-pressed);
  }

  /* Avatar Variants */
  .avatar {
    @apply relative inline-flex items-center justify-center overflow-hidden rounded-full;
    box-shadow: var(--shadow-raised);
  }

  .avatar-sm {
    @apply h-8 w-8;
  }
  .avatar-md {
    @apply h-12 w-12;
  }
  .avatar-lg {
    @apply h-16 w-16;
  }

  .avatar-group {
    @apply flex -space-x-4;
  }

  .avatar-group .avatar {
    @apply ring-background ring-2;
  }

  /* Enhanced Switch */
  .switch-fancy {
    @apply relative inline-block h-7 w-14;
  }

  .switch-fancy input {
    @apply h-0 w-0 opacity-0;
  }

  .switch-fancy .slider {
    @apply absolute inset-0 cursor-pointer rounded-full transition-all duration-300;
    box-shadow: var(--shadow-pressed);
  }

  .switch-fancy .slider:before {
    content: "";
    @apply absolute bottom-1 left-1 h-5 w-5 rounded-full transition-all duration-300;
    box-shadow: var(--shadow-raised);
  }

  .switch-fancy input:checked + .slider {
    @apply bg-primary;
  }

  .switch-fancy input:checked + .slider:before {
    transform: translateX(28px);
  }

  /* Enhanced Links */
  .link {
    @apply text-primary relative inline-flex items-center gap-2;
  }

  .link::after {
    content: "";
    @apply bg-primary absolute bottom-0 left-0 h-0.5 w-0 transition-all duration-300;
  }

  .link:hover::after {
    @apply w-full;
  }

  .link-underline {
    @apply hover:border-primary border-b-2 border-transparent transition-colors;
  }

  .link-fade {
    @apply opacity-75 transition-opacity hover:opacity-100;
  }

  /* Context Menu (Pure CSS) */
  .context-menu-trigger {
    @apply relative;
  }

  .context-menu {
    @apply bg-background invisible absolute z-50 w-48 scale-95 transform rounded-lg py-1 opacity-0 transition-all duration-200;
    box-shadow: var(--shadow-raised);
  }

  .context-menu-trigger:hover .context-menu,
  .context-menu-trigger:focus-within .context-menu {
    @apply visible scale-100 opacity-100;
  }

  /* Navigation Links */
  .nav-link {
    @apply relative px-4 py-2 transition-all;
  }

  .nav-link::after {
    content: "";
    @apply bg-primary absolute bottom-0 left-1/2 h-0.5 w-0 -translate-x-1/2 transform transition-all duration-300;
  }

  .nav-link:hover::after,
  .nav-link.active::after {
    @apply w-full;
  }

  /* Buttons with Icons */
  .btn-icon {
    @apply inline-flex items-center justify-center gap-2 transition-all;
  }

  .btn-icon-only {
    @apply rounded-full p-2;
  }

  /* Footer */
  .footer {
    @apply bg-background mt-auto py-8;
    box-shadow: var(--shadow-raised);
  }

  .footer-content {
    @apply container mx-auto grid gap-8 px-4 md:grid-cols-4;
  }

  /* Dropdown Submenu */
  .dropdown-submenu {
    @apply relative;
  }

  .dropdown-submenu .dropdown-content {
    @apply invisible absolute top-0 left-full ml-1 -translate-x-2 transform opacity-0 transition-all duration-200;
  }

  .dropdown-submenu:hover > .dropdown-content,
  .dropdown-submenu:focus-within > .dropdown-content {
    @apply visible translate-x-0 opacity-100;
  }

  /* Mobile Navigation */
  .mobile-menu-toggle {
    @apply relative h-6 w-6 cursor-pointer;
  }

  .mobile-menu-toggle span {
    @apply absolute left-0 h-0.5 w-full transform bg-current transition-all duration-300;
  }

  .mobile-menu-toggle span:first-child {
    @apply top-0;
  }

  .mobile-menu-toggle span:nth-child(2) {
    @apply top-1/2 -translate-y-1/2;
  }

  .mobile-menu-toggle span:last-child {
    @apply bottom-0;
  }

  .mobile-menu-toggle.active span:first-child {
    @apply top-1/2 rotate-45;
  }

  .mobile-menu-toggle.active span:nth-child(2) {
    @apply opacity-0;
  }

  .mobile-menu-toggle.active span:last-child {
    @apply bottom-1/2 -rotate-45;
  }

  /* Bottom Navigation */
  .bottom-nav-link {
    @apply flex flex-col items-center gap-1 rounded-lg p-2 transition-all;
  }

  .bottom-nav-link:hover {
    @apply nm-pressed;
  }

  .bottom-nav-link.active {
    @apply nm-pressed text-primary;
  }
}

/* --------------------------------------------------
    6) UTILITIES LAYER: Neumorphic & Animation Classes
    -------------------------------------------------- */
@layer utilities {
  /* Base neumorphic classes */
  .nm-flat {
    background: var(--color-background);
    box-shadow: var(--shadow-flat);
  }

  .nm-raised {
    background: var(--color-background);
    box-shadow: var(--shadow-raised);
  }

  .nm-pressed {
    background: var(--color-background);
    box-shadow: var(--shadow-pressed);
  }

  .nm-convex {
    background: var(--color-background);
    box-shadow: var(--shadow-convex);
  }

  /* Hover variants */
  .hover\:nm-flat:hover {
    background: var(--color-background) !important;
    box-shadow: var(--shadow-flat) !important;
  }

  .hover\:nm-raised:hover {
    background: var(--color-background) !important;
    box-shadow: var(--shadow-raised) !important;
  }

  .hover\:nm-pressed:hover {
    background: var(--color-background) !important;
    box-shadow: var(--shadow-pressed) !important;
    transform: var(--transform-press);
  }

  .hover\:nm-convex:hover {
    background: var(--color-background) !important;
    box-shadow: var(--shadow-convex) !important;
  }

  /* Group hover variants */
  .group:hover .group-hover\:nm-flat {
    background: var(--color-background) !important;
    box-shadow: var(--shadow-flat) !important;
  }

  .group:hover .group-hover\:nm-raised {
    background: var(--color-background) !important;
    box-shadow: var(--shadow-raised) !important;
  }

  .group:hover .group-hover\:nm-pressed {
    background: var(--color-background) !important;
    box-shadow: var(--shadow-pressed) !important;
    transform: var(--transform-press);
  }

  .group:hover .group-hover\:nm-convex {
    background: var(--color-background) !important;
    box-shadow: var(--shadow-convex) !important;
  }

  /* Peer variants */
  .peer:hover ~ .peer-hover\:nm-flat {
    background: var(--color-background) !important;
    box-shadow: var(--shadow-flat) !important;
  }

  .peer:hover ~ .peer-hover\:nm-raised {
    background: var(--color-background) !important;
    box-shadow: var(--shadow-raised) !important;
  }

  .peer:hover ~ .peer-hover\:nm-pressed {
    background: var(--color-background) !important;
    box-shadow: var(--shadow-pressed) !important;
    transform: var(--transform-press);
  }

  .peer:hover ~ .peer-hover\:nm-convex {
    background: var(--color-background) !important;
    box-shadow: var(--shadow-convex) !important;
  }

  /* Focus variants */
  .focus\:nm-flat:focus {
    background: var(--color-background);
    box-shadow: var(--shadow-flat);
  }

  .focus\:nm-raised:focus {
    background: var(--color-background);
    box-shadow: var(--shadow-raised);
  }

  .focus\:nm-pressed:focus {
    background: var(--color-background);
    box-shadow: var(--shadow-pressed);
  }

  .focus\:nm-convex:focus {
    background: var(--color-background);
    box-shadow: var(--shadow-convex);
  }

  /* Active variants */
  .active\:nm-flat:active {
    background: var(--color-background);
    box-shadow: var(--shadow-flat);
  }

  .active\:nm-raised:active {
    background: var(--color-background);
    box-shadow: var(--shadow-raised);
  }

  .active\:nm-pressed:active {
    background: var(--color-background);
    box-shadow: var(--shadow-pressed);
  }

  .active\:nm-convex:active {
    background: var(--color-background);
    box-shadow: var(--shadow-convex);
  }

  /* Additional neumorphic utilities */
  .nm-concave {
    background: var(--color-background);
    box-shadow:
      inset var(--shadow-depth-md) var(--shadow-depth-md) var(--shadow-blur-md)
        var(--color-shadow-dark),
      inset calc(var(--shadow-depth-md) * -1) calc(var(--shadow-depth-md) * -1)
        var(--shadow-blur-md) var(--color-shadow-light);
  }

  .hover\:nm-concave:hover {
    background: var(--color-background);
    box-shadow:
      inset var(--shadow-depth-md) var(--shadow-depth-md) var(--shadow-blur-md)
        var(--color-shadow-dark),
      inset calc(var(--shadow-depth-md) * -1) calc(var(--shadow-depth-md) * -1)
        var(--shadow-blur-md) var(--color-shadow-light);
  }

  .nm-inset {
    background: var(--color-background);
    box-shadow: inset var(--shadow-depth-sm) var(--shadow-depth-sm)
      var(--shadow-blur-sm) var(--color-shadow-dark);
  }

  .hover\:nm-inset:hover {
    background: var(--color-background);
    box-shadow: inset var(--shadow-depth-sm) var(--shadow-depth-sm)
      var(--shadow-blur-sm) var(--color-shadow-dark);
  }

  .nm-ridge {
    background: var(--color-background);
    box-shadow:
      var(--shadow-depth-sm) var(--shadow-depth-sm) var(--shadow-blur-sm)
        var(--color-shadow-dark),
      calc(var(--shadow-depth-sm) * -1) calc(var(--shadow-depth-sm) * -1)
        var(--shadow-blur-sm) var(--color-shadow-light),
      inset var(--shadow-depth-sm) var(--shadow-depth-sm) var(--shadow-blur-sm)
        var(--color-shadow-light),
      inset calc(var(--shadow-depth-sm) * -1) calc(var(--shadow-depth-sm) * -1)
        var(--shadow-blur-sm) var(--color-shadow-dark);
  }

  .hover\:nm-ridge:hover {
    background: var(--color-background);
    box-shadow:
      var(--shadow-depth-sm) var(--shadow-depth-sm) var(--shadow-blur-sm)
        var(--color-shadow-dark),
      calc(var(--shadow-depth-sm) * -1) calc(var(--shadow-depth-sm) * -1)
        var(--shadow-blur-sm) var(--color-shadow-light),
      inset var(--shadow-depth-sm) var(--shadow-depth-sm) var(--shadow-blur-sm)
        var(--color-shadow-light),
      inset calc(var(--shadow-depth-sm) * -1) calc(var(--shadow-depth-sm) * -1)
        var(--shadow-blur-sm) var(--color-shadow-dark);
  }

  .nm-groove {
    background: var(--color-background);
    box-shadow:
      inset var(--shadow-depth-sm) var(--shadow-depth-sm) var(--shadow-blur-sm)
        var(--color-shadow-dark),
      inset calc(var(--shadow-depth-sm) * -1) calc(var(--shadow-depth-sm) * -1)
        var(--shadow-blur-sm) var(--color-shadow-light);
  }

  .hover\:nm-groove:hover {
    background: var(--color-background);
    box-shadow:
      inset var(--shadow-depth-sm) var(--shadow-depth-sm) var(--shadow-blur-sm)
        var(--color-shadow-dark),
      inset calc(var(--shadow-depth-sm) * -1) calc(var(--shadow-depth-sm) * -1)
        var(--shadow-blur-sm) var(--color-shadow-light);
  }

  /* Responsive variants */
  @media (min-width: 640px) {
    .sm\:nm-flat {
      box-shadow: var(--shadow-flat);
    }
    .sm\:nm-raised {
      box-shadow: var(--shadow-raised);
    }
    .sm\:nm-pressed {
      box-shadow: var(--shadow-pressed);
    }
    .sm\:nm-convex {
      box-shadow: var(--shadow-convex);
    }
    .sm\:nm-concave {
      box-shadow: var(--shadow-concave);
    }
    .sm\:nm-inset {
      box-shadow: var(--shadow-inset);
    }
    .sm\:nm-ridge {
      box-shadow: var(--shadow-ridge);
    }
    .sm\:nm-groove {
      box-shadow: var(--shadow-groove);
    }
  }

  @media (min-width: 768px) {
    .md\:nm-flat {
      box-shadow: var(--shadow-flat);
    }
    .md\:nm-raised {
      box-shadow: var(--shadow-raised);
    }
    .md\:nm-pressed {
      box-shadow: var(--shadow-pressed);
    }
    .md\:nm-convex {
      box-shadow: var(--shadow-convex);
    }
    .md\:nm-concave {
      box-shadow: var(--shadow-concave);
    }
    .md\:nm-inset {
      box-shadow: var(--shadow-inset);
    }
    .md\:nm-ridge {
      box-shadow: var(--shadow-ridge);
    }
    .md\:nm-groove {
      box-shadow: var(--shadow-groove);
    }
  }

  @media (min-width: 1024px) {
    .lg\:nm-flat {
      box-shadow: var(--shadow-flat);
    }
    .lg\:nm-raised {
      box-shadow: var(--shadow-raised);
    }
    .lg\:nm-pressed {
      box-shadow: var(--shadow-pressed);
    }
    .lg\:nm-convex {
      box-shadow: var(--shadow-convex);
    }
    .lg\:nm-concave {
      box-shadow: var(--shadow-concave);
    }
    .lg\:nm-inset {
      box-shadow: var(--shadow-inset);
    }
    .lg\:nm-ridge {
      box-shadow: var(--shadow-ridge);
    }
    .lg\:nm-groove {
      box-shadow: var(--shadow-groove);
    }
  }

  @media (min-width: 1280px) {
    .xl\:nm-flat {
      box-shadow: var(--shadow-flat);
    }
    .xl\:nm-raised {
      box-shadow: var(--shadow-raised);
    }
    .xl\:nm-pressed {
      box-shadow: var(--shadow-pressed);
    }
    .xl\:nm-convex {
      box-shadow: var(--shadow-convex);
    }
    .xl\:nm-concave {
      box-shadow: var(--shadow-concave);
    }
    .xl\:nm-inset {
      box-shadow: var(--shadow-inset);
    }
    .xl\:nm-ridge {
      box-shadow: var(--shadow-ridge);
    }
    .xl\:nm-groove {
      box-shadow: var(--shadow-groove);
    }
  }

  @media (min-width: 1536px) {
    .\32xl\:nm-flat {
      box-shadow: var(--shadow-flat);
    }
    .\32xl\:nm-raised {
      box-shadow: var(--shadow-raised);
    }
    .\32xl\:nm-pressed {
      box-shadow: var(--shadow-pressed);
    }
    .\32xl\:nm-convex {
      box-shadow: var(--shadow-convex);
    }
    .\32xl\:nm-concave {
      box-shadow: var(--shadow-concave);
    }
    .\32xl\:nm-inset {
      box-shadow: var(--shadow-inset);
    }
    .\32xl\:nm-ridge {
      box-shadow: var(--shadow-ridge);
    }
    .\32xl\:nm-groove {
      box-shadow: var(--shadow-groove);
    }
  }

  @media (min-width: 1920px) {
    .\33xl\:nm-flat {
      box-shadow: var(--shadow-flat);
    }
    .\33xl\:nm-raised {
      box-shadow: var(--shadow-raised);
    }
    .\33xl\:nm-pressed {
      box-shadow: var(--shadow-pressed);
    }
    .\33xl\:nm-convex {
      box-shadow: var(--shadow-convex);
    }
    .\33xl\:nm-concave {
      box-shadow: var(--shadow-concave);
    }
    .\33xl\:nm-inset {
      box-shadow: var(--shadow-inset);
    }
    .\33xl\:nm-ridge {
      box-shadow: var(--shadow-ridge);
    }
    .\33xl\:nm-groove {
      box-shadow: var(--shadow-groove);
    }
  }

  /* Dark mode variants */
  .dark .dark\:nm-flat {
    box-shadow: var(--shadow-flat);
  }
  .dark .dark\:nm-raised {
    box-shadow: var(--shadow-raised);
  }
  .dark .dark\:nm-pressed {
    box-shadow: var(--shadow-pressed);
  }
  .dark .dark\:nm-convex {
    box-shadow: var(--shadow-convex);
  }
  .dark .dark\:nm-concave {
    box-shadow: var(--shadow-concave);
  }
  .dark .dark\:nm-inset {
    box-shadow: var(--shadow-inset);
  }
  .dark .dark\:nm-ridge {
    box-shadow: var(--shadow-ridge);
  }
  .dark .dark\:nm-groove {
    box-shadow: var(--shadow-groove);
  }

  /* Dark mode hover variants */
  .dark .dark\:hover\:nm-flat:hover {
    box-shadow: var(--shadow-flat);
  }
  .dark .dark\:hover\:nm-raised:hover {
    box-shadow: var(--shadow-raised);
  }
  .dark .dark\:hover\:nm-pressed:hover {
    box-shadow: var(--shadow-pressed);
  }
  .dark .dark\:hover\:nm-convex:hover {
    box-shadow: var(--shadow-convex);
  }
  .dark .dark\:hover\:nm-concave:hover {
    box-shadow: var(--shadow-concave);
  }
  .dark .dark\:hover\:nm-inset:hover {
    box-shadow: var(--shadow-inset);
  }
  .dark .dark\:hover\:nm-ridge:hover {
    box-shadow: var(--shadow-ridge);
  }
  .dark .dark\:hover\:nm-groove:hover {
    box-shadow: var(--shadow-groove);
  }

  /* INTERACTIVE STATES */
  .nm-interactive {
    transition: all var(--duration-normal) var(--ease-default);
  }

  .nm-interactive:hover {
    transform: var(--hover-lift);
    filter: brightness(1.1);
  }

  .nm-interactive:active {
    transform: var(--active-press);
    box-shadow: var(--shadow-pressed);
  }

  .nm-interactive:focus-visible {
    box-shadow: var(--focus-glow), var(--shadow-raised);
  }

  /* Animation classes remain unchanged */
  .animate-float {
    animation: float 3s ease-in-out infinite;
  }

  .animate-bounce {
    animation: bounce 0.6s var(--ease-in-out) infinite;
  }

  .animate-shake {
    animation: shake 0.5s var(--ease-in-out) infinite;
  }

  .animate-spin {
    animation: spin 1s linear infinite;
  }

  .animate-pulse {
    animation: pulse 2s var(--ease-in-out) infinite;
  }

  .animate-once {
    animation-iteration-count: 1;
  }

  .animate-twice {
    animation-iteration-count: 2;
  }

  .animate-thrice {
    animation-iteration-count: 3;
  }

  .animate-infinite {
    animation-iteration-count: infinite;
  }

  .animate-pause {
    animation-play-state: paused;
  }

  .animate-slow {
    animation-duration: calc(var(--duration-normal) * 2);
  }

  .animate-fast {
    animation-duration: calc(var(--duration-normal) * 0.5);
  }

  /* REDUCED MOTION */
  @media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
      scroll-behavior: auto !important;
    }

    .animate-float,
    .animate-bounce,
    .animate-shake,
    .animate-spin,
    .animate-pulse {
      animation: none !important;
    }
  }

  /* Animation Utilities */
  .slide-in-right {
    animation: slideInRight var(--slide-duration)
      var(--transition-timing-smooth);
  }

  .slide-in-left {
    animation: slideInLeft var(--slide-duration) var(--transition-timing-smooth);
  }

  .slide-in-up {
    animation: slideInUp var(--slide-duration) var(--transition-timing-smooth);
  }

  .fade-in {
    animation: fadeIn var(--fade-duration) var(--transition-timing-smooth);
  }

  .scale-in {
    animation: scaleIn var(--scale-duration) var(--transition-timing-smooth);
  }

  @keyframes slideInRight {
    from {
      transform: translateX(100%);
    }
    to {
      transform: translateX(0);
    }
  }

  @keyframes slideInLeft {
    from {
      transform: translateX(-100%);
    }
    to {
      transform: translateX(0);
    }
  }

  @keyframes slideInUp {
    from {
      transform: translateY(100%);
    }
    to {
      transform: translateY(0);
    }
  }

  @keyframes fadeIn {
    from {
      opacity: 0;
    }
    to {
      opacity: 1;
    }
  }

  @keyframes scaleIn {
    from {
      transform: scale(0.95);
      opacity: 0;
    }
    to {
      transform: scale(1);
      opacity: 1;
    }
  }
}
